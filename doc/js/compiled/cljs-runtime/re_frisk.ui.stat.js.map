{"version":3,"sources":["re_frisk/ui/stat.cljs"],"mappings":"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","names":["re-frisk.ui.stat/current-reg","re_frisk.inlined_deps.reagent.v1v0v0.reagent.core.atom","re-frisk.ui.stat/reg-button","key","data","cnt","cljs.core/count","cljs.core.get","active","cljs.core/deref","cljs.core._EQ_","G__39180","cljs.core.assoc","cljs.core/reset!","re-frisk.ui.stat/show-copied","re-frisk.ui.stat/share-button","re-frame-data","js/setTimeout","re-frisk.clipboard/copy-to-clip","re-frisk.ui.stat/sort-by-key","re-frisk.ui.stat/sort-fn","item","map__39191","cljs.core/--destructure-map","ms","cljs.core/second","re-frisk.ui.stat/stat","re-frisk.ui.components.components/scroller","iter__4622__auto__","s__39195","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4620__auto__","size__4621__auto__","b__39197","cljs.core/chunk-buffer","i__39196","vec__39202","cljs.core/-nth","cljs.core.nth","map__39205","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__39194","cljs.core/chunk-rest","vec__39207","cljs.core/first","map__39210","cljs.core/cons","cljs.core/rest","p1__39193#","cljs.core.sort_by","cljs.core/>","re-frisk.utils/str-ms","cljs.core/chunk-first"],"sourcesContent":["(ns re-frisk.ui.stat\n  (:require [re-frisk.inlined-deps.reagent.v1v0v0.reagent.core :as reagent]\n            [re-frisk.ui.components.components :as components]\n            [re-frisk.utils :as utils]\n            [re-frisk.clipboard :as clipboard]))\n\n(def current-reg (reagent/atom :event))\n\n(defn reg-button [key data]\n  (let [cnt (count (get data key))\n        active (= key @current-reg)]\n    [:div {:style (cond-> {:display       :flex :margin 5 :padding-left 4 :padding-right 4\n                           :cursor :pointer :border-radius 4 :color (if active :white :gray)}\n                    active\n                    (assoc :background-color \"#df691a\")\n                    (not active)\n                    (assoc :border-width 1 :border-color :gray :border-style :solid))\n           :on-click #(reset! current-reg key)}\n     (str key \" (\" cnt \")\")]))\n\n(def show-copied (reagent/atom nil))\n\n(defn share-button [re-frame-data]\n  (let [data @(:stat re-frame-data)]\n    [:div\n     [:div {:style    {:display      :flex :margin 5 :padding-left 4 :padding-right 4\n                       :cursor       :pointer :border-radius 4 :color \"#df691a\"\n                       :border-width 1 :border-color \"#df691a\" :border-style :solid}\n            :on-click (fn []\n                        (reset! show-copied true)\n                        (js/setTimeout #(reset! show-copied false) 2000)\n                        (clipboard/copy-to-clip (str \"*stats for my re-frame project by re-frisk* \\n\"\n                                                     \"db: \" (count  @(:app-db re-frame-data)) \" | \"\n                                                     \"fx: \" (count (get data :fx)) \" | \"\n                                                     \"cofx: \" (count (get data :cofx)) \" | \"\n                                                     \"event: \" (count (get data :event)) \" | \"\n                                                     \"sub: \" (count (get data :sub))\n                                                     \" (\" (count @(:subs re-frame-data)) \")\")))}\n      \"share\"]\n     (when @show-copied\n       [:div {:style {:position :absolute :background-color :white :border-radius 4}} \"copied\"])]))\n\n(def sort-by-key (reagent/atom :cnt))\n(defn sort-fn [key item]\n  (let [{:keys [cnt ms]} (second item)]\n    (if (= key :cnt)\n      cnt\n      (if (and (pos? ms) (pos? cnt)) (/ ms cnt) 0))))\n\n(defn stat [re-frame-data]\n  (let [data @(:stat re-frame-data)]\n    [:div {:style {:display :flex :flex 1 :background-color \"#f3f3f3\" :color \"#444444\"\n                   :padding 8 :flex-direction :column}}\n     [:div {:style {:display :flex :flex-direction :row :margin-bottom 8}}\n      [reg-button :fx data]\n      [reg-button :cofx data]\n      [reg-button :event data]\n      [reg-button :sub data]\n      [:div {:style {:display :flex  :flex 1}}]\n      [share-button re-frame-data]]\n     [:div {:style {:display :flex :flex-direction :row :border-bottom \"solid 1px #000000\"}}\n      [:div {:style {:width \"100%\"}} @current-reg]\n      [:div {:style {:width 100 :cursor :pointer} :on-click #(reset! sort-by-key :cnt)} \"runs\"]\n      [:div {:style {:width 100 :cursor :pointer} :on-click #(reset! sort-by-key :ms)} \"avg. time\"]]\n     [components/scroller\n      (for [[key {:keys [cnt ms]}] (sort-by #(sort-fn @sort-by-key %) > (get data @current-reg))]\n        ^{:key (str \"item\" key)}\n        [:div {:style {:display :flex :flex-direction :row :flex 1 :border-bottom \"solid 1px #CCCCCC\"}}\n         [:div {:style {:width \"100%\"}} (str key)]\n         [:div {:style {:width 100}} (when (pos? cnt) cnt)]\n         [:div {:style {:width 100}} (when (and (pos? ms) (pos? cnt)) (utils/str-ms (/ ms cnt)))]])]]))\n\n"]}