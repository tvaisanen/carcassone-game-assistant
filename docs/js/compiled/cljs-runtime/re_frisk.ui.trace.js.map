{"version":3,"sources":["re_frisk/ui/trace.cljs"],"mappings":"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","names":["re-frisk.ui.trace/subs-count","label","val","color","duration-ms","p__39020","map__39021","cljs.core/--destructure-map","cljs.core.get","re-frisk.ui.trace/subs-details","run-count","created-count","disposed-count","subs","render-count","force-count","run-duration-ms","created-duration-ms","disposed-duration-ms","render-duration-ms","created-count-cached","created-duration-cached-ms","force-duration-ms","create-class-count","create-class-duration-ms","shoud-update-count","shoud-update-duration-ms","re-frisk.ui.components.colors/sub-create","re-frisk.ui.components.colors/sub-create-cached","re-frisk.ui.components.colors/sub-run","re-frisk.ui.components.colors/sub-dispose","re-frisk.ui.components.colors/force-update","re-frisk.ui.components.colors/render","re-frisk.ui.components.components/scroller","iter__4622__auto__","s__39023","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4620__auto__","size__4621__auto__","cljs.core/count","b__39025","cljs.core/chunk-buffer","i__39024","map__39026","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__39022","cljs.core/chunk-rest","map__39041","cljs.core/first","cljs.core/cons","cljs.core/rest","id","op-type","operation","cached?","cljs.core.sort_by","cljs.core/>","re-frisk.ui.components.colors/sub-colors","p__39047","map__39048","re-frisk.ui.trace/subs-item","p__39053","map__39054","re-frisk.ui.trace/trace-item","tool-state","p__39055","map__39056","selected?","indx","item","_","event","cljs.core.swap_BANG_","cljs.core/assoc","re-frisk.utils/scroll-timeline-event-item","cljs.core/deref","cljs.core._EQ_","p__39061","map__39062","re-frisk.ui.trace/trace-event-item","name","effects","cnt","re-frisk.ui.components.colors/effect","cljs.core/chunk-first"],"sourcesContent":["(ns re-frisk.ui.trace\n  (:require-macros [re-frisk.inlined-deps.reagent.v1v0v0.reagent.ratom :refer [reaction]])\n  (:require [re-frisk.ui.components.components :as components]\n            [re-frisk.utils :as utils]\n            [re-frisk.ui.components.colors :as colors]))\n\n(defn subs-count [label val color duration-ms]\n  [:div {:style {:display        :flex :align-items :center :margin-right 10\n                 :flex-direction :column}}\n   label\n   [:div {:style {:display :flex :align-items :center}}\n    (when val\n      [:div {:style {:display       :flex :margin 5 :padding-left 4 :padding-right 4 :background-color color\n                     :border-radius 4 :color :white}}\n       val])\n    duration-ms]])\n\n(defn subs-details [{:keys [duration-ms run-count created-count disposed-count subs render-count force-count\n                            run-duration-ms created-duration-ms disposed-duration-ms render-duration-ms\n                            created-count-cached created-duration-cached-ms force-duration-ms\n                            create-class-count create-class-duration-ms shoud-update-count shoud-update-duration-ms]}]\n  [:div {:style {:display :flex :flex 1 :background-color \"#f3f3f3\" :color \"#444444\"\n                 :padding 8 :flex-direction :column}}\n   [:div {:style {:display :flex :flex-direction :row :margin-bottom 8 :border-bottom \"solid 1px #CCCCCC\"}}\n    [subs-count \"Total time\" nil nil duration-ms]\n    [:div {:style {:width 1 :height \"90%\" :background-color \"#CCCCCC\" :margin-right 10}}]\n    (when (pos? created-count)\n      [subs-count \"Created\" created-count colors/sub-create created-duration-ms])\n    (when (pos? created-count-cached)\n      [subs-count \"Cached\" created-count-cached colors/sub-create-cached created-duration-cached-ms])\n    (when (pos? run-count)\n      [subs-count \"Run\" run-count colors/sub-run run-duration-ms])\n    (when (pos? disposed-count)\n      [subs-count \"Disposed\" disposed-count colors/sub-dispose disposed-duration-ms])\n    (when (or (pos? render-count) (pos? create-class-count) (pos? force-count))\n      [:div {:style {:width 1 :height \"90%\" :background-color \"#CCCCCC\" :margin-left 10 :margin-right 10}}])\n    (when (pos? create-class-count)\n      [subs-count \"Create class\" create-class-count colors/sub-create-cached create-class-duration-ms])\n    (when (pos? force-count)\n      [subs-count \"Force Update\" force-count colors/force-update force-duration-ms])\n    (when (pos? shoud-update-count)\n      [subs-count \"Should update\" shoud-update-count colors/sub-create-cached shoud-update-duration-ms])\n    (when (pos? render-count)\n      [subs-count \"Render\" render-count colors/render render-duration-ms])]\n   [components/scroller\n    (for [{:keys [id duration-ms op-type operation cached?]} (sort-by :duration > subs)]\n      ^{:key (str \"item\" id)}\n      [:div {:style {:display :flex :flex-direction :row :flex 1}}\n       [:div {:style {:display :flex :min-width 100\n                      :color (get colors/sub-colors (if cached? :sub/create-cached op-type))}}\n        (str op-type)]\n       [:div {:style {:display :flex :min-width 100 :width \"100%\"}} (str operation)]\n       [:div {:style {:display :flex :min-width 60}} duration-ms]])]])\n\n(defn subs-item [{:keys [duration-ms run-count created-count disposed-count render-count force-count]}]\n  [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between}}\n   [:div \"reagent\"]\n   [:div {:style {:display :flex :flex-direction :row}}\n    duration-ms\n    (when-not (zero? created-count)\n      [:div {:style {:background-color colors/sub-create :margin-left 5}}\n       created-count])\n    (when-not (zero? run-count)\n      [:div {:style {:background-color colors/sub-run :margin-left 5}}\n       run-count])\n    (when-not (zero? disposed-count)\n      [:div {:style {:background-color colors/sub-dispose :margin-left 5}}\n       disposed-count])\n    (when-not (zero? render-count)\n      [:div {:style {:background-color colors/render :margin-left 5}}\n       render-count])\n    (when-not (zero? force-count)\n      [:div {:style {:background-color colors/force-update :margin-left 5}}\n       force-count])]])\n\n(defn trace-item [{:keys [op-type]} tool-state]\n  ;(when-not (= op-type :re-frame.router/fsm-trigger)\n  (fn [{:keys [selected? op-type indx] :as item} _]\n    [:a\n     {:href     \"#\"\n      :id       (str \"events-list-item\" indx)\n      :class    (str \"list-group-item\" (when selected? \" active\"))\n      :style    {:padding           0 :font-size 11 :opacity \"0.7\"\n                 :border-left-width 2 :white-space :pre :width \"100%\"}\n      :on-click (fn [event]\n                  (swap! tool-state assoc :selected-event item)\n                  (utils/scroll-timeline-event-item (:doc @tool-state) indx)\n                  (.preventDefault event))}\n     (if (= :subs op-type)\n       [subs-item item]\n       [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between}}\n        [:div (str op-type)]])]))\n\n(defn trace-event-item [{:keys [name duration-ms effects]}]\n  [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between :align-items :center}}\n   [:div {:style {:display :flex :overflow :hidden}} name]\n   [:div {:style {:display :flex :flex-direction :row}}\n    [:div {:style {:display :flex :font-size 11 :margin-left 5}}\n     duration-ms]\n    (when-let [cnt (count effects)]\n      (when (pos? cnt)\n        [:div {:style {:background-color colors/effect :margin-left 5}}\n         cnt]))]])\n"]}